# Documenting Your project
文檔是開發人員經常忽略的工作，有時也被管理人員忽略。 這通常是由於開發週期結束時沒有時間，而且人們認為他們不擅長寫作。 其中一些確實很糟糕，但其中大多數都能夠生成精美的文檔。

在任何情況下，結果都是由倉促編寫的文檔組成的雜亂無章的文檔。 大多數時候，開發人員討厭做這種工作。 
當現有文檔需要更新時，情況會變得更糟。 許多項目只是提供糟糕的、過時的文檔，因為經理不知道如何處理它。

## The seven rules of rechnical writing 
編寫好的文檔在很多方面都比編寫代碼容易。 大多數開發人員認為這很難，但是通過遵循一組簡單的規則，它變得非常容易。
我們在這裡不是在談論寫一本詩集，而是一段綜合性的文本，可以用來理解設計、API 或構成代碼庫的任何東西。
每個開發人員都能夠製作這樣的材料，本節提供了七個適用於所有情況的規則：
- Write in two steps
  專注於想法，然後審查和塑造你的文本。
- Target the readership
  鎖定目標讀者
- Use a simple style
  讓文本變的直接簡單，使用好的語法學
- Limit the scope of the information
  一次只介紹一個concept
- Use a realistic code examples
  Foos" and "bars" 應該被避免
- Use a light but sufficient approach
  咱們不應該寫書
- Use templates
  教讀者去學到habits

這些規則的靈感和改編自敏捷文檔：為軟件項目生成輕量級文檔的模式指南，Wiley，Andreas Rüping 的一本書，專注於在軟件項目中生成最佳文檔。

### Write in two steps 
另一种方法是放弃文本的样式和组织，而专注于其内容。 所有的想法都写在纸上，不管它们是怎么写的。 开发人员开始编写一个连续的流，并且在他或她犯语法错误或任何与内容无关的错误时不会暂停。 比如句子难懂也无所谓，只要把思路写下来就行了。 他或她只是用粗略的组织写下他想说的话。

第二步包括回读全文并对其进行润色，以便每个人都能理解。 润色文本意味着增强它的风格，纠正它的错误，稍微重组它，并删除它所有的冗余信息。

### Target the readship
Good documentation should follow a simple rule—each text should have only one kind of reader.

### Use a simple style 
通過保持句子簡短，你的作品將消耗更少的腦力來提取、處理和理解它們的內容。 編寫技術文檔旨在為讀者提供軟件指南。 這不是小說故事，應該更接近您的微波通知而不是最新的斯蒂芬金小說。

### Limit the scope of information
軟件中有一個錯誤文檔的簡單標誌——您正在尋找一些您知道存在於某處但找不到的信息。 花一些時間閱讀目錄後，您開始嘗試幾個單詞組合來 grep 文件，但無法獲得您要查找的內容。

當作家沒有按主題組織他們的文本時，就會發生這種情況。 他們可能會提供大量信息，但這些信息只是以單一或非邏輯的方式收集的。 例如，如果讀者正在尋找您的應用程序的全景圖，他或她不應該閱讀 API 文檔——那是低級的事情。

為避免這種影響，段落應集中在給定部分的有意義的標題下，並且全局文檔標題應將內容綜合為一個簡短的短語。

目錄可以由所有部分的標題組成。

編寫標題的一個簡單做法是問自己，“我會在 Google 中輸入什麼短語來找到這個部分？”

### Use realistic code examples
Foo 和 bar 是壞公民。 當讀者試圖通過一個用法示例來理解一段代碼是如何工作時，有一個不切實際的示例會使它更難理解。
為什麼不使用真實世界的例子呢？ 通常的做法是確保每個代碼示例都可以剪切並粘貼到真實程序中。

### Use a light but sufficient approach
在大多數敏捷方法中，文檔不是第一公民。 製作可用的軟件比詳細的文檔更重要。 因此，正如 Scott Ambler 在他的《敏捷建模：極限編程和統一過程的有效實踐》（John Wiley & Sons）一書中解釋的那樣，一個好的實踐是定義真正的文檔需求，而不是創建詳盡無遺的文檔集。

### Use templates 
因此，使用模板強製文檔採用通用模式，從而使人們更有效地使用它們。 他們習慣了結構並且知道如何快速閱讀它。
為每種文檔提供模板也為作者提供了快速入門。

## A reStructuredText primer 
reStructuredText 也稱為 reST。 
它是一種純文本標記語言，在 Python 社區中廣泛用於記錄包。 reST 的優點在於文本仍然可讀，因為標記語法不會像 LaTeX 那樣混淆文本。

### Section structure 
文檔的標題及其部分使用非字母數字字符加下劃線。 它們可以加上劃線和下劃線，通常的做法是對標題使用這種雙重標記，並為部分保留一個簡單的下劃線。

## Building the documentation
正如我們在本章前一節中學到的那樣，引導讀者和作者的一種更簡單的方法是為他們每個人提供幫助和指南。
從作者的角度來看，這是通過擁有一組可重複使用的模板以及描述如何以及何時在項目中使用它們的指南來完成的。 它被稱為文檔組合。
從讀者的角度來看，能夠輕鬆瀏覽文檔並習慣高效地查找信息非常重要。 它是通過構建文檔景觀來完成的。

### Building the portfolio
軟件項目可以擁有多種文檔，從直接引用代碼的低級文檔到提供應用程序高級概述的設計文件。
例如，Scott Ambler 在他的書 Agile Modeling: Effective Practices for eXtreme Programming and the Unified Process, John Wiley & Sons 中定義了一個廣泛的文檔類型列表。 他構建了從早期規範到運營文檔的投資組合。 甚至包括項目管理文檔，因此整個文檔需求都是使用一組標準化模板構建的。

由於完整的產品組合與用於構建軟件的方法密切相關，因此本章將只關注您可以根據您的特定需求完成的通用子集。 建立有效的投資組合需要很長時間，因為它會捕捉您的工作習慣。

### Design
創建此類文檔的重點是確保目標讀者完全了解並且內容範圍有限。 因此，設計文檔的通用模板可以為作者提供一個簡單的結構和一些建議。
结构可能包含
- Title 
- Author 
- Tags
- Description
- Target 
- Content 
- References to other documents 
  
### Usage 
使用文檔描述了軟件的特定部分是如何使用的。 該文檔可以描述低級部分，例如函數的工作原理，也可以描述高級部分，例如調用程序的命令行參數。 這是框架應用程序文檔中最重要的部分，因為目標讀者主要是要重用代碼的開發人員。
三種主要的文件是： 
- Recipe:   這是一個簡短的文檔，解釋瞭如何做某事。 這種文件針對一個讀者群並專注於一個特定的主題。
- Tutorial: 這是一個逐步說明如何使用軟件功能的文檔。 本文檔可以參考食譜，每個實例僅供一個讀者使用。
- Module helper:  這是一個解釋模塊包含的內容的低級文檔。 當您通過模塊調用內置幫助時，可以（例如）顯示此文檔。

#### Recipe 
食譜回答了一個非常具體的問題，並提供了解決該問題的方法。 例如，ActiveState 在線提供了一個巨大的 Python 食譜存儲庫，開發人員可以在其中描述如何用 Python 做某事（請參閱 http://code.activestate.com/recipes/langs/python/）。 這樣一組與單個區域/項目相關的食譜通常被稱為菜譜。
這些食譜必須簡短且結構如下：
- Title
- Submitter
- Last updated
- Version
- Category
- Description
- Source(the source code)
- Discussion(the text explaining the code)
- Comments(from the web)


#### Tutorial 
教程在用途上不同於菜譜。 它不是為了解決孤立的問題，而是描述如何逐步使用應用程序的功能。 這可能比配方更長，並且可能涉及應用程序的許多部分。

#### Module helper 
最後一個可以添加到我們集合中的模板是模塊助手模板。 模塊助手引用單個模塊並提供其內容的描述以及使用示例。

此外，模塊文檔提供的示例有時會引用模塊的多個部分，並且很難在函數和類的文檔字符串之間進行拆分。 模塊文檔字符串可以通過在模塊頂部寫入文本來用於該目的。 但這最終會產生一個由文本塊而不是代碼塊組成的混合文件。 當代碼表示的長度少於總長度的 50% 時，這會相當混亂。 如果你是作者，這完全沒問題。 但是當人們試圖閱讀代碼（而不是文檔）時，他們將不得不跳過文檔字符串部分。

### Operations 
操作文檔用於描述如何操作軟件。 例如考慮以下幾點：
- 安裝部署文檔
- Adminstration documents
- 常見問題 (FAQ) 文檔
- 解釋人們如何貢獻、尋求幫助或提供反饋的文檔
這些文檔非常具體，但它們可能可以使用前面部分中定義的教程模板。

## Making your own portfolio
我們之前討論的模板只是您可以用來記錄軟件的基礎。 隨著時間的推移，您最終會開發出自己的文檔製作模板和風格。 但始終牢記項目文檔的簡潔但足夠的方法：添加的每個文檔都應該有一個明確定義的目標讀者群，並且應該滿足真正的需求。 不增加實際價值的文檔不應該被編寫。

每個項目都是獨一無二的，並且有不同的文檔需求。 例如，使用簡單的小型終端工具絕對可以只使用一個 README 文件作為其文檔環境。 如果目標讀者被精確定義並一致地分組（例如係統管理員），那麼採用這種最小的單文檔方法是完全沒問題的。


### Building the landscape 
上一節中構建的文檔組合提供了文檔級別的結構，但沒有提供對其進行分組和組織以構建讀者將擁有的文檔的方法。 這就是 Andreas Rüping 所說的文檔景觀，指的是讀者在瀏覽文檔時使用的心理地圖。 他得出的結論是，組織文檔的最佳方式是構建邏輯樹。

#### Producer's layout 
從生產者的角度來看，每個文檔的處理方式與 Python 模塊完全一樣。 它應該存儲在版本控制系統中並像代碼一樣工作。 作家不關心他們散文的最終外觀以及它在哪裡可用，他們只想確保他們正在寫一份文件，所以它是所涵蓋主題的唯一真實來源。 存儲在文件夾樹中的 reStructuredText 文件與軟件代碼一起在版本控制系統中可用，是為生產者構建文檔環境的便捷解決方案。

#### Consumer's layout 
- Sphinx
從消費者的角度來看，編制索引文件並以易於閱讀和美觀的格式呈現整個文檔非常重要。 網頁是最佳選擇，並且很容易從重組文本文件生成。
##### Working on the index pages
Sphinx 提供了一個 toctree 指令，可用於在文檔中插入目錄，並鏈接到其他文檔。 每行必須是一個文件及其
 
相對路徑，從當前文檔開始。 還可以提供全局樣式名稱以添加多個與表達式匹配的文件。

##### Registering module helpers
對於模塊助手，可以添加一個標記，以便它自動列出並在模塊的索引頁面中可用：

##### Cross-references
最後，Sphinx 提供了一個內聯標記來設置交叉引用
### Documentation building and continuous intergration
Sphinx 確實從消費者的角度提升了閱讀文檔的可讀性和體驗。 如前所述，當它的某些部分與代碼緊密耦合時，它特別有用，因此以 dosctrings 或模塊助手的形式出現。 雖然這種方法確實可以更輕鬆地確保文檔的源版本與其記錄的代碼相匹配，但它不能保證文檔讀者可以訪問最新和最新的編譯版本。

如果文檔的目標讀者對命令行工具不夠熟練，並且不知道如何將其構建為可瀏覽和可讀的形式，那麼只有最少的源表示也是不夠的。 這就是為什麼每當提交/推送對代碼存儲庫的任何更改時，將文檔自動構建為對消費者友好的形式很重要。

託管使用 Sphinx 構建的文檔的最佳方式是生成 HTML 構建並將其作為靜態資源提供給您選擇的 Web 服務器。 Sphinx 
提供了適當的 Makefile 來使用 make html 命令構建 HTML 文件。 因為 make 是一個非常常用的實用程序，所以將此過程與第 8 章“管理代碼”中討論的任何持續集成系統集成起來應該非常容易。

如果您正在使用 Sphinx 記錄開源項目，那麼使用閱讀文檔 (https://readthedocs.org/) 將使您的生活變得更加輕鬆。 它是一項免費服務，用於使用 Sphinx 託管開源 Python 項目的文檔。 該配置完全沒有麻煩，並且可以非常輕鬆地與兩個流行的代碼託管服務集成：GitHub 和 Bitbucket。 實際上，如果您正確連接了帳戶並正確設置了代碼存儲庫，則只需單擊幾下鼠標即可在 Read the Docs 上啟用文檔託管。
